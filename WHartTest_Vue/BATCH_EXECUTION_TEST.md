# 批量测试执行功能测试指南

## 🎯 功能入口

### 1. 创建测试套件按钮
**位置**: 测试用例列表页面 - 左上角搜索区域
**显示条件**: 当选中至少一个测试用例后显示
**按钮**: `创建测试套件 (N)` - 带文件夹图标

### 2. 测试套件管理按钮
**位置**: 测试用例列表页面 - 右上角操作区域
**显示条件**: 始终显示
**按钮**: `测试套件` - 带应用图标

## 🧪 测试步骤

### 步骤1: 验证按钮显示

1. 启动前端服务:
```bash
cd WHartTest_Vue
npm run dev
```

2. 登录系统并进入"测试用例管理"页面

3. 检查右上角是否有"测试套件"按钮 ✅

4. 勾选至少一个测试用例

5. 检查左上角是否出现"创建测试套件"按钮 ✅

### 步骤2: 创建测试套件

1. 勾选2-3个测试用例

2. 点击"创建测试套件"按钮

3. 应该弹出"创建测试套件"模态框

4. 填写信息:
   - 套件名称: "登录功能回归测试"
   - 套件描述: "测试所有登录相关功能"
   - 已选用例会自动显示

5. 点击"确定"创建套件

6. 应该显示成功消息

### 步骤3: 查看测试套件

1. 点击右上角"测试套件"按钮

2. 应该弹出"测试套件管理"模态框

3. 可以看到刚创建的套件列表

4. 每个套件显示:
   - 套件名称
   - 描述
   - 用例数量
   - 创建者
   - 创建时间
   - 操作按钮(执行/编辑/删除)

### 步骤4: 执行测试套件

1. 在套件列表中找到刚创建的套件

2. 点击"执行"按钮

3. 应该弹出"确认执行测试套件"对话框

4. 查看执行信息:
   - 套件名称
   - 用例数量
   - 预计耗时

5. 点击"确定"开始执行

6. 应该显示"测试执行已启动"消息

## 🐛 常见问题排查

### 问题1: 按钮不显示

**可能原因**:
- 项目未选择
- 组件导入错误
- TypeScript编译错误

**排查步骤**:
1. 检查是否选择了项目
2. 打开浏览器控制台查看错误
3. 检查Vue DevTools中的组件树

### 问题2: 点击按钮无反应

**可能原因**:
- 事件处理函数未正确绑定
- 模态框组件未注册

**排查步骤**:
1. 打开浏览器控制台查看错误
2. 检查Network标签是否有API请求
3. 确认组件是否正确导入

### 问题3: API请求失败

**可能原因**:
- 后端服务未启动
- Celery Worker未启动
- Redis未启动

**排查步骤**:
1. 确认Django服务运行在 http://localhost:8000
2. 确认Celery Worker正在运行
3. 确认Redis服务正在运行

## 🔧 开发调试

### 查看组件渲染

打开Vue DevTools:
1. 找到 `TestCaseManagementView` 组件
2. 检查 `isTestSuiteFormVisible` 和 `isTestSuiteListVisible` 状态
3. 检查 `selectedTestCaseIdsForSuite` 数据

### 查看API请求

打开Chrome DevTools Network标签:
1. 筛选XHR请求
2. 查看请求URL、方法、参数
3. 查看响应状态和数据

### 查看Celery任务

在Celery Worker终端:
1. 查看任务接收日志
2. 查看任务执行进度
3. 查看任务完成/失败状态

## 📝 预期行为

### 正常流程
```
选择用例 → 创建套件 → 查看套件列表 → 执行套件 → 查看执行结果
```

### 按钮状态
- ✅ 未选择用例时: 只显示"测试套件"按钮
- ✅ 选择用例后: 同时显示"创建测试套件"和"测试套件"按钮
- ✅ 创建套件后: 按钮恢复初始状态

### 模态框行为
- ✅ 点击遮罩层不关闭
- ✅ 点击取消按钮关闭
- ✅ 提交成功后自动关闭
- ✅ 关闭后清空表单数据

## 🎨 UI验证点

### 按钮样式
- "创建测试套件": outline类型,蓝色文字,带文件夹图标
- "测试套件": outline类型,蓝色文字,带应用图标
- 执行按钮: primary类型,带播放图标

### 模态框样式
- 宽度: 600-1200px(根据内容)
- 标题栏带关闭按钮
- 底部操作按钮
- 响应式布局

### 交互反馈
- 加载状态: 显示loading动画
- 成功操作: 绿色成功提示
- 失败操作: 红色错误提示
- 警告信息: 黄色警告提示

## 📊 测试数据

建议测试数据:
- 测试套件数量: 1-5个
- 每个套件用例数: 2-10个
- 套件名称长度: 10-50字符
- 描述长度: 50-200字符

## 🚀 性能测试

### 大批量测试
1. 创建包含50+用例的套件
2. 观察加载时间
3. 检查内存使用
4. 验证分页功能

### 并发测试
1. 同时创建多个套件
2. 同时执行多个套件
3. 验证任务队列处理

## ✅ 验收标准

### 功能完整性
- [ ] 可以创建测试套件
- [ ] 可以查看套件列表
- [ ] 可以编辑测试套件
- [ ] 可以删除测试套件
- [ ] 可以执行测试套件
- [ ] 可以查看执行结果

### UI/UX
- [ ] 按钮位置合理
- [ ] 图标显示正确
- [ ] 模态框居中显示
- [ ] 表单验证正确
- [ ] 错误提示清晰

### 性能
- [ ] 页面加载快速(<2秒)
- [ ] 操作响应及时(<500ms)
- [ ] 大数据量处理正常
- [ ] 无内存泄漏

---

**注意**: 如果遇到任何问题,请查看:
1. 浏览器控制台错误
2. Vue DevTools组件状态
3. Network请求日志
4. 后端服务日志
5. Celery Worker日志